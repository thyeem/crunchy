<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=0.9,
                                   maximum-scale=1.0, minimum-scale=0.9">  
    <link rel="stylesheet" href="[% css_fa %]">
    <link rel="stylesheet" href="[% css_bcf %]">
    <script src="[% js_jquery %]"></script>
    <script>
        $(function() {
            SOFIAI = "[% SOFIAI %]";
            MARIAI = "[% MARIAI %]";
            HUMAN = "[% HUMAN %]";
            BLACK = "[% BLACK %]";
            WHITE = "[% WHITE %]";
            EMPTY = "[% EMPTY %]";
            NL = [% NL %];
            _id = "[% id %]";
            _bcf = [% bcf %];
            _unit = [% unit %];
            _sec = [% timeout %];
            _locked = [% locked %];
            _turn = "[% board.turn %]";
            _lastX = [% board.X %];
            _lastY = [% board.Y %];
            _moves = [% board.moves %];
            _violation = [% violation %];
            _replay = [% replay %];
            _pB = "[% pB %]" || HUMAN;
            _pW = "[% pW %]" || HUMAN;
            _bell_on = (_replay) ? 0 : 1;
            _alert = "[% alert %]";
            _view = [ [% FOREACH q IN view %]'[% q %]',[% END %] ];

        });
    </script>
    <script src="[% js_bcf %]"></script>
    <title>[% title %]</title>
    <link href="https://fonts.googleapis.com/css?family=Alegreya+SC:500,700" rel="stylesheet">
    <!--link rel="icon" type="image/png" sizes="96x96" href="img/favicon.png"-->
</head>

<body class="flash">
<div id="wrapper">
    <!-- title & game id -->
    <h1 id="title"><b>[% title %]</b></h1>

    <div id="header">
    <form id="form" action="index.pl" method="[% method %]">

        <!-- BCF mode -->
        <div class="menu" title="Goggle BCF Mode">
            <a href="#" id="bcf_mode">
                <i class="fa fa-toggle-on" id="bcf_switch"   
                   style="color:#299c39;font-size:28px"></i>[% M %]
            </a>
        </div>

        <!-- new game -->
        <div class="menu" title="New Game">
            <a href="./">
                <i class="fa fa-delicious" style="color:#3152a5"></i>[% M %]
            </a>
        </div>
        
        <!-- save -->
        <div class="menu">
            <a href="#" id="save" title="Save the Current Game">
                <i class="fa fa-send" style="color:#31b5d6"></i>[% M %]
            </a>
            <div id="msg_div">
                <input type="text" id="msg" name="msg" value="">
            </div>
        </div>

        <!-- replay -->
        <div class="menu" title="Replay the Saved Games">
            <a href="#" id="replay">
                <i class="fa fa-bookmark" style="color:#ff3118"></i>[% M %]
            </a>
            <div id="rp_list">
            [% FOREACH db IN gamelist %]
                <div><a href="index.pl?id=[% db.id %]&do=replay&bcf=1">[% db.msg %]</a></div>
            [% END %]
            </div>
        </div>

        <!-- undo -->
        <div class="menu" title="Undo Last Move">
            <a href="#" id="undo">
                <i class="fa fa-undo" style="color:#ff6342"></i>[% M %]
            </a>
        </div>

        <!-- counter -->
        <div class="menu_timer" title="Toggle Counter">
            <a href="#" id="timer">
            <i class="fa fa-bell" id="bell" style="color:#ffff9c"></i>[% S %]
            <span id="counter">[% timeout %]</span>
            </a>
        </div>

        <!-- Move nav -->
        <div class="menu" title="Navigator / # of Moves">
            <a href="#" id="back">
                <i class="fa fa-arrow-left" style="color:#3152a5"></i>
            </a>
            [% S %][% board.moves %][% S %]
            <a href="#" id="forth">
                <i class="fa fa-arrow-right" style="color:#3152a5"></i>
            </a>
        </div>

        <!-- players / victory Points -->
        <div class="menu_score" title="Black/White Victory Points">
            <select name="pB" id="pB" class="select-player">
                <option value="human" selected>&#9679; Human</option>
                <option value="sofia">&#9679; SofiAI</option>
                <option value="maria">&#9679; MariAI</option>
            </select>
            <b>[% board.scoreB %]</b> [% S %]
            <select name="pW" id="pW" class="select-player">
                <option value="human" selected>&#9675; Human</option>
                <option value="sofia">&#9675; SofiAI</option>
                <option value="maria">&#9675; MariAI</option>
            </select>
            <b>[% board.scoreW %]</b>
        </div>

        <!-- hidden values -->
        <input type="hidden" id="id" name="id" value="[% id %]">
        <input type="hidden" id="do" name="do">
        <input type="hidden" id="go" name="go">
        <input type="hidden" id="x"  name="x">
        <input type="hidden" id="y"  name="y">
        <input type="hidden" id="bcf" name="bcf">

    </form>
    </div>

    <!-- game board -->
    <div><canvas id="board" width="570" height="570"> </canvas></div>

    <!-- copyright -->
    Sofimarie Bitten Connect Five [% dash %] (c) 2019 Francis.

    <!-- popup msg --> 
    [% IF alert %]
    <script>setTimeout(function() { alert("[% alert %]") }, 300);</script>
    [% END %]
</div>

</body>
</html>
