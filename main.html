<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=0.9,
                                   maximum-scale=1.0, minimum-scale=0.9">  
    <link rel="stylesheet" href="[% css_fa %]">
    <link rel="stylesheet" href="[% css_bcf %]">
    <script src="[% js_jquery %]"></script>
    <script src="[% js_bcf %]"></script>
    <script src="js/sha1.js"></script>
    <title>[% title %]</title>
    <link href="https://fonts.googleapis.com/css?family=Alegreya+SC:500,700" rel="stylesheet">
    <!--link rel="icon" type="image/png" sizes="96x96" href="img/favicon.png"-->
</head>

<body>
<div id="wrapper">
    <div id="header">
        <!-- title & game id -->
        <a href="" ><h1 id="title"><b>[% title %]</b></h1></a>
        <form id="form" action="index.pl" method="[% method %]">
        <!-- BCF mode -->
        <div class="menu" title="Goggle BCF Mode">
            <a href="#" id="bcf-mode">
            <i class="fa fa-toggle-on" id="bcf-switch"   
               style="color:#299c39;font-size:28px"></i>[% M %]
            </a>
        </div>

        <!-- new game -->
        <div class="menu" title="New Game">
            <a href="./">
            <i class="fa fa-delicious" style="color:#3152a5"></i>[% M %]
            </a>
        </div>
        
        <!-- save -->
        <div class="menu">
            <a href="#" id="save" title="Save the Current Game">
            <i class="fa fa-send" style="color:#31b5d6"></i>[% M %]
            </a>
            <div id="msg-div" class="float-div">
                <input type="text" id="msg" name="msg" class="float-box"
                 placeholder="Save game: text and press Enter">
            </div>
            <div id="key-div" class="float-div">
                <input type="password" id="pwd" name="pwd" class="float-box"
                 placeholder="Reserved key">
            </div>
        </div>

        <!-- replay -->
        <div class="menu" title="Replay the Saved Games">
            <a href="#" id="replay">
            <i class="fa fa-bookmark" style="color:#ff3118"></i>[% M %]
            </a>
            <div id="rp-list" class="float-div float-box">
            [% FOREACH db IN gamelist %]
                <div>
                    <a href="#" id="[% db.id %]" class="rp-del">[x]</a>[% M %]
                    <a href="index.pl?id=[% db.id %]&do=replay&bcf=1">[% db.msg %]</a>
                </div>
            [% END %]
            </div>
        </div>

        <!-- undo -->
        <div class="menu" title="Undo Last Move">
            <a href="#" id="undo">
            <i class="fa fa-undo" style="color:#ff6342"></i>[% M %]
            </a>
        </div>

        <!-- counter -->
        <div class="menu_timer" title="Toggle Counter">
            <a href="#" id="timer">
            <i class="fa fa-bell" id="bell" style="color:#ffff9c"></i>[% S %]
            <span id="counter">[% timeout %]</span>
            </a>
        </div>

        <!-- Move nav -->
        <div class="menu" title="Navigator / # of Moves">
            <a href="#" id="back">
            <i class="fa fa-arrow-left" style="color:#3152a5"></i>
            </a>
            [% S %][% board.moves %][% S %]
            <a href="#" id="forth">
            <i class="fa fa-arrow-right" style="color:#3152a5"></i>
            </a>
        </div>

        <!-- players / victory Points -->
        <div class="menu_score" title="Black/White Victory Points">
            <select id="pB" name="pB" class="select-player">
                <option value="human">&#9679; Human</option>
                <option value="sofia">&#9679; SofiAI</option>
                <option value="maria">&#9679; MariAI</option>
            </select>
            <b>[% board.scoreB %]</b> [% S %]
            <select id="pW" name="pW" class="select-player">
                <option value="human">&#9675; Human</option>
                <option value="sofia">&#9675; SofiAI</option>
                <option value="maria">&#9675; MariAI</option>
            </select>
            <b>[% board.scoreW %]</b>
        </div>

        <!-- hidden values -->
        <input type="hidden" id="id" name="id" value="[% id %]">
        <input type="hidden" id="bcf" name="bcf" value="[% bcf %]">
        <input type="hidden" id="turn" name="turn" value="[% board.turn %]">
        <input type="hidden" id="moves" name="moves" value="[% board.moves %]">
        <input type="hidden" id="x" name="x" value="[% board.X %]">
        <input type="hidden" id="y" name="y" value="[% board.Y %]">
        <input type="hidden" id="eB" name="eB" value="[% eB %]">
        <input type="hidden" id="eW" name="eW" value="[% eW %]">
        <input type="hidden" id="do" name="do">
        <input type="hidden" id="go" name="go">
        <input type="hidden" id="SOFIAI" value="[% SOFIAI %]">
        <input type="hidden" id="MARIAI" value="[% MARIAI %]">
        <input type="hidden" id="HUMAN" value="[% HUMAN %]">
        <input type="hidden" id="BLACK" value="[% BLACK %]">
        <input type="hidden" id="WHITE" value="[% WHITE %]">
        <input type="hidden" id="EMPTY" value="[% EMPTY %]">
        <input type="hidden" id="UNIT" value="[% UNIT %]">
        <input type="hidden" id="NL" value="[% NL %]">
        <input type="hidden" id="sec" value="[% timeout %]">
        <input type="hidden" id="locked" value="[% locked %]">
        <input type="hidden" id="view" value="[% view %]">
        <input type="hidden" id="alert" value="[% alert %]">
        <input type="hidden" id="pBset" value="[% pB %]">
        <input type="hidden" id="pWset" value="[% pW %]">
        <input type="hidden" id="did" name="did">
        </form>
    </div>  


    <!-- winning probability -->
    <div id="prob">
        <span class="overflow inline-block-fixed" id="black-wp"></span><span class="overflow inline-block-fixed" id="white-wp"></span>
    </div>

    <!-- loading spinner -->
    <div id="spinner"></div>

    <!-- help popup -->
    <div id="help" class="float-div float-box">
    <!-- HELP DOC /////////////////////////////////////////////////////////-->
        - Game<br/>
        Bitten Connect Five (BCF) [% dash %] A brand new game created by Francis.<br/>
        Francis wanted to change "Gomoku" with a more complex rule.<br/><br/>

        - Playing with AI<br/>
        Francis created some AI applications for this game [% dash %]
        SofiAI and MariAI [% dash %] Just select one from the select-box.<br/> 
        Enjoy the time with them.<br/><br/>

        - Rule<br/>
        <b><u>BCF rule</u></b>: One can clamp the enemy's two successive stones
        in any directions if any [% dash %] then capture those stones.<br/>
        (1) firstly makes five stones in a row [% dash %] victory<br/>
        (2) 10 captured stones [% dash %] victory<br/><br/>

        - Menu<br/>
        <i class="fa fa-toggle-on" style="color:#299c39;font-size:16px"></i>[% L %]
        Toggle BCF game mode. (See the BCF rule above)<br/>
        <i class="fa fa-delicious" style="color:#3152a5;font-size:16px"></i>[% L %]
        Start a new game<br/>
        <i class="fa fa-send" style="color:#31b5d6;font-size:16px"></i>[% L %]
        Save the most recent game played<br/>
        <i class="fa fa-bookmark" style="color:#ff3118;font-size:16px"></i>[% L %]
        Load and replay the game list saved<br/>
        <i class="fa fa-undo" style="color:#ff6342;font-size:16px"></i>[% L %]
        Undo last move on the game plyaing<br/>
        <i class="fa fa-bell" style="color:#ffff9c;font-size:16px"></i>[% L %]
        Toggle clock timer (time per move: 120 secs by default)<br/>
        <i class="fa fa-arrow-right" style="color:#3152a5;font-size:16px"></i>[% L %]
        Move back and forth (only activated in the finished game)<br/>
        <img src="img/spinner.svg" style="width:16px;height:16px;">[% L %]
        All accesss denied while AI is thinking<br/><br/>

        - Estimated Winning Probability (EWP) Bar</br>
        <div style="border: solid 1px #444;background-color:#eee;width:300px;">
        <div style="text-align:center;color:#eee;height:20px;
                    width:75%;background-color:#444">70%</div></div>
        EWP is updated right after every MariAI's move only.<br/>
        Freely select each player from the drop-down menu.<br/><br/>

        - Shortcuts<br/>
        [right-arrow] [% dash %] Go to the next move<br/>
        [left-arrow] [% dash %] Go to the previous move<br/>
        [up-arrow] [% dash %] Jump to the previous 5- move<br/>
        [down-arrow] [% dash %] Jump to the next 5+ move<br/>
        0 [% dash %] Go to the first move<br/>
        9 [% dash %] Go to the last move<br/>
        m [% dash %] Off clock timer<br/><br/>
    <!-- END OF HELP //////////////////////////////////////////////////////-->
    </div>
    <!-- game board -->
    <div><canvas id="board" width="570" height="570"></canvas></div>

    <!-- copyright -->
    Sofimarie Bitten Connect Five [% dash %] (c) 2019 Francis.
</div>

<!-- popup msg --> 
[% IF alert %]
<script>setTimeout(function() { alert("[% alert %]") }, 300);</script>
[% END %]

</body>
</html>
